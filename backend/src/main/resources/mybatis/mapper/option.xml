<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="option">

	<insert id="add" parameterType="optionvo">
		<![CDATA[
			insert into option
				values(null, #{optionValue}, #{stockAvailability}, #{additionalPrice}, #{productNo}, #{optionNameNo})
		]]>
		<selectKey keyProperty="no" resultType="long" order="AFTER">
			<![CDATA[
		        SELECT LAST_INSERT_ID()
			]]>
	    </selectKey>
	</insert>
	
	<delete id="delete" parameterType="long">
		<![CDATA[
			delete from option where no = #{no}		
		]]>
	</delete>
	
	<select id="getProductOptionList" parameterType="long" resultType="optionDto">
		<![CDATA[
			select a.no as productNo,
				   b.option_name as optionName,
				   a.option_value as optionValue,
				   a.additional_price as additionalPrice,
				   a.stock_availability as stockAvailability
			from option a, option_name b
			where a.optionname_no = b.no and
			a.product_no = #{no}
		]]>
	</select>
	
</mapper>